[platformio]
#
# This list defines what firmwares to build. You can remove the # before the name to enable it. Add a # in front of the line to disable.
# Make sure at least 1 is enabled before triggering the build process.
# This file is based on the WLED release 0.15.0-rc1 source code, and might not work for other versions. Adapt as required below.
#
default_envs =
# Dig-Uno
 #Dig-Uno V3 with QuinLED-ESP32-AB (Antenna onBoard) or QuinLED-ESP32-AE (Antenna External)
 # & temperature sensor installed
 # & rhk_underglow board
  RHKeanBLE

#
# Common settings for boards
#
[rhkean]
custom_usermods = audioreactive Internal_Temperature_v2 Temperature multi_relay

build_flags_disable_features =
  -D WLED_DISABLE_ALEXA
  -D WLED_DISABLE_BLYNK
  -D WLED_DISABLE_HUESYNC
  -D WLED_DISABLE_LOXONE
  -D WLED_DISABLE_INFRARED
  -D WLED_DISABLE_WEBSOCKETS
  -D WLED_DISABLE_MQTT
  -D WLED_DISABLE_2D
  -D WLED_DISABLE_PXMAGIC
  -D WLED_DISABLE_ESPNOW

build_flags_preconfig_settings =
  -D RLYPIN=-1
  -D STATUSLED=2
  -D DATA_PINS=3,4,16,17,21,25
  -D PIXEL_COUNTS=60,160,11,11,60 # ambient lighting, underglow, L/R DRL, Scoop&Logo, unused

build_flags_dig_ar =
  -D sqrt_internal=sqrtf
  -D SR_DMTYPE=1
  -D I2S_SDPIN=18
  -D I2S_WSPIN=22
  -D I2S_CKPIN=27
  -D SR_SQUELCH=10
  -D SR_GAIN=30
  -D MCLK_PIN=-1
  -D IRPIN=-1

build_flags_temperature =
  -D TEMPERATURE_PIN=13

build_flags_multi_relay =
  -D MULTI_RELAY_MAX_RELAYS=2
  -D MULTI_RELAY_PINS=19,23
  -D MULTI_RELAY_DELAYS=0,0
  -D MULTI_RELAY_EXTERNALS=false,false

build_flags_max_buttons =
  -D WLED_MAX_BUTTONS=7
  -D BTNPIN=0,5,14,33,34,35,39
  -D BTNTYPE=BTN_TYPE_PUSH,BTN_TYPE_SWITCH,BTN_TYPE_SWITCH,BTN_TYPE_SWITCH,BTN_TYPE_SWITCH,BTN_TYPE_SWITCH,BTN_TYPE_SWITCH

build_flags = 
  ${env:esp32dev.build_flags}
  ${rhkean.build_flags_disable_features}
  ${rhkean.build_flags_preconfig_settings}
  ${rhkean.build_flags_dig_ar}
  ${rhkean.build_flags_temperature}
  ${rhkean.build_flags_multi_relay}
  ${rhkean.build_flags_max_buttons}
  ${common.debug_flags}

build_unflags =
  -D WLED_ENABLE_DMX_INPUT
  -D WLED_ENABLE_GIF

lib_deps =
  esp32async/AsyncTCP @ 3.4.7
  fastled/FastLED @ 3.6.0
  makuna/NeoPixelBus @ 2.8.3
  https://github.com/Aircoookie/ESPAsyncWebServer.git#v2.4.2

####################################################
#
# Dig-Uno Underglow
#
####################################################
[env:RHKean]
extends = env:esp32dev
custom_usermods = ${rhkean.custom_usermods}
build_flags =
  -D WLED_PRODUCT_NAME='"Underglow"'
  -D SERVERNAME='"Underglow"'
  ${rhkean.build_flags}
build_unflags = ${rhkean.build_unflags}
lib_deps = ${rhkean.lib_deps}

[env:RHKeanBLE]
extends = env:esp32dev
custom_usermods = BLE ${rhkean.custom_usermods}
build_flags =
  -D WLED_PRODUCT_NAME='"UnderglowBLE"'
  -D SERVERNAME='"UnderglowBLE"'
  ${rhkean.build_flags}
build_unflags = ${rhkean.build_unflags}
lib_deps = ${rhkean.lib_deps}
